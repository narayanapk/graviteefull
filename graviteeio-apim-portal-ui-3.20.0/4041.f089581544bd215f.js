"use strict";(self.webpackChunkgravitee_portal_webui=self.webpackChunkgravitee_portal_webui||[]).push([[4041],{44041:(R,P,f)=>{f.r(P),f.d(P,{StreamLanguage:()=>g,StringStream:()=>c});var o=f(55340),w=f(99526),p=f(35733);function S(a,t,e,n=0,s=0){null==t&&-1==(t=a.search(/[^\s\u00a0]/))&&(t=a.length);let i=s;for(let r=n;r<t;r++)9==a.charCodeAt(r)?i+=e-i%e:i++;return i}class c{constructor(t,e,n){this.string=t,this.tabSize=e,this.indentUnit=n,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return 0==this.pos}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(t){let n,e=this.string.charAt(this.pos);if(n="string"==typeof t?e==t:e&&(t instanceof RegExp?t.test(e):t(e)),n)return++this.pos,e}eatWhile(t){let e=this.pos;for(;this.eat(t););return this.pos>e}eatSpace(){let t=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t}skipToEnd(){this.pos=this.string.length}skipTo(t){let e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0}backUp(t){this.pos-=t}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=S(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){return S(this.string,null,this.tabSize)}match(t,e,n){if("string"==typeof t){let s=r=>n?r.toLowerCase():r;return s(this.string.substr(this.pos,t.length))==s(t)?(!1!==e&&(this.pos+=t.length),!0):null}{let s=this.string.slice(this.pos).match(t);return s&&s.index>0?null:(s&&!1!==e&&(this.pos+=s[0].length),s)}}current(){return this.string.slice(this.start,this.pos)}}function N(a){if("object"!=typeof a)return a;let t={};for(let e in a){let n=a[e];t[e]=n instanceof Array?n.slice():n}return t}class g extends p.SQ{constructor(t){let s,e=(0,p.kU)(t.languageData),n=function I(a){return{token:a.token,blankLine:a.blankLine||(()=>{}),startState:a.startState||(()=>!0),copyState:a.copyState||N,indent:a.indent||(()=>null),languageData:a.languageData||{},tokenTable:a.tokenTable||m}}(t);super(e,new class extends o._b{createParse(r,h,l){return new x(s,r,h,l)}},function U(a){let t=o.Jq.define({id:d.length,name:"Document",props:[p.mi.add(()=>a)]});return d.push(t),t}(e),[p.tK.of((r,h)=>this.getIndent(r,h))]),s=this,this.streamParser=n,this.stateAfter=new o.md({perNode:!0}),this.tokenTable=t.tokenTable?new C(n.tokenTable):M}static define(t){return new g(t)}getIndent(t,e){let n=(0,p.qz)(t.state),s=n.resolve(e);for(;s&&s.type!=this.topNode;)s=s.parent;if(!s)return null;let r,h,i=k(this,n,0,s.from,e);if(i?(h=i.state,r=i.pos+1):(h=this.streamParser.startState(t.unit),r=0),e-r>1e4)return null;for(;r<e;){let u=t.state.doc.lineAt(r),E=Math.min(e,u.to);if(u.length){let L=new c(u.text,t.state.tabSize,t.unit);for(;L.pos<E-u.from;)v(this.streamParser.token,L,h)}else this.streamParser.blankLine(h,t.unit);if(E==e)break;r=u.to+1}let{text:l}=t.lineAt(e);return this.streamParser.indent(h,/^\s*(.*)/.exec(l)[1],t)}get allowsNesting(){return!1}}function k(a,t,e,n,s){let i=e>=n&&e+t.length<=s&&t.prop(a.stateAfter);if(i)return{state:a.streamParser.copyState(i),pos:e+t.length};for(let r=t.children.length-1;r>=0;r--){let h=t.children[r],l=e+t.positions[r],u=h instanceof o.mp&&l<s&&k(a,h,l,n,s);if(u)return u}return null}function y(a,t,e,n,s){if(s&&e<=0&&n>=t.length)return t;!s&&t.type==a.topNode&&(s=!0);for(let i=t.children.length-1;i>=0;i--){let l,r=t.positions[i],h=t.children[i];if(r<n&&h instanceof o.mp){if(!(l=y(a,h,e-r,n-r,s)))break;return s?new o.mp(t.type,t.children.slice(0,i).concat(l),t.positions.slice(0,i+1),r+l.length):l}}return null}class x{constructor(t,e,n,s){this.lang=t,this.input=e,this.fragments=n,this.ranges=s,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=s[s.length-1].to;let i=p.Be.get(),r=s[0].from,{state:h,tree:l}=function O(a,t,e,n){for(let s of t){let l,r=s.to-(s.openEnd?25:0),h=s.from+(s.openStart?25:0)<=e&&r>e&&k(a,s.tree,0-s.offset,e,r);if(h&&(l=y(a,s.tree,e+s.offset,h.pos+s.offset,!1)))return{state:h.state,tree:l}}return{state:a.streamParser.startState(n?(0,p.y1)(n):4),tree:o.mp.empty}}(t,n,r,null==i?void 0:i.state);this.state=h,this.parsedPos=this.chunkStart=r+l.length;for(let u=0;u<l.children.length;u++)this.chunks.push(l.children[u]),this.chunkPos.push(l.positions[u]);i&&this.parsedPos<i.viewport.from-1e5&&(this.state=this.lang.streamParser.startState((0,p.y1)(i.state)),i.skipUntilInView(this.parsedPos,i.viewport.from),this.parsedPos=i.viewport.from)}advance(){let t=p.Be.get(),e=null==this.stoppedAt?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(e,this.chunkStart+2048);for(t&&(n=Math.min(n,t.viewport.to));this.parsedPos<n;)this.parseLine(t);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=e?this.finish():t&&this.parsedPos>=t.viewport.to?(t.skipUntilInView(this.parsedPos,e),this.finish()):null}stopAt(t){this.stoppedAt=t}lineAfter(t){let e=this.input.chunk(t);if(this.input.lineChunks)"\n"==e&&(e="");else{let n=e.indexOf("\n");n>-1&&(e=e.slice(0,n))}return t+e.length<=this.to?e:e.slice(0,this.to-t)}nextLine(){let t=this.parsedPos,e=this.lineAfter(t),n=t+e.length;for(let s=this.rangeIndex;;){let i=this.ranges[s].to;if(i>=n||(e=e.slice(0,i-(n-e.length)),s++,s==this.ranges.length))break;let r=this.ranges[s].from,h=this.lineAfter(r);e+=h,n=r+h.length}return{line:e,end:n}}skipGapsTo(t,e,n){for(;;){let s=this.ranges[this.rangeIndex].to,i=t+e;if(n>0?s>i:s>=i)break;e+=this.ranges[++this.rangeIndex].from-s}return e}emitToken(t,e,n,s,i){if(this.ranges.length>1){e+=i=this.skipGapsTo(e,i,1);let r=this.chunk.length;n+=i=this.skipGapsTo(n,i,-1),s+=this.chunk.length-r}return this.chunk.push(t,e,n,s),i}parseLine(t){let{line:e,end:n}=this.nextLine(),s=0,{streamParser:i}=this.lang,r=new c(e,t?t.state.tabSize:4,t?(0,p.y1)(t.state):2);if(r.eol())i.blankLine(this.state,r.indentUnit);else for(;!r.eol();){let h=v(i.token,r,this.state);if(h&&(s=this.emitToken(this.lang.tokenTable.resolve(h),this.parsedPos+r.start,this.parsedPos+r.pos,4,s)),r.start>1e4)break}this.parsedPos=n,this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let t=o.mp.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:D,topID:0,maxBufferLength:2048,reused:this.chunkReused});t=new o.mp(t.type,t.children,t.positions,t.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(t),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new o.mp(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function v(a,t,e){t.start=t.pos;for(let n=0;n<10;n++){let s=a(t,e);if(t.pos>t.start)return s}throw new Error("Stream parser failed to advance stream.")}const m=Object.create(null),d=[o.Jq.none],D=new o.Lj(d),T=[],A=Object.create(null);for(let[a,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])A[a]=_(m,t);class C{constructor(t){this.extra=t,this.table=Object.assign(Object.create(null),A)}resolve(t){return t?this.table[t]||(this.table[t]=_(this.extra,t)):0}}const M=new C(m);function b(a,t){T.indexOf(a)>-1||(T.push(a),console.warn(t))}function _(a,t){let e=null;for(let i of t.split(".")){let r=a[i]||w.pJ[i];r?"function"==typeof r?e?e=r(e):b(i,`Modifier ${i} used at start of tag`):e?b(i,`Tag ${i} used as modifier`):e=r:b(i,`Unknown highlighting tag ${i}`)}if(!e)return 0;let n=t.replace(/ /g,"_"),s=o.Jq.define({id:d.length,name:n,props:[(0,w.Gv)({[n]:e})]});return d.push(s),s.id}}}]);